<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.test.mybatis.I_ImageDAO">
   
   <insert id="fr_register">
   
   	INSERT INTO TBL_FR_ARTICLE(FR_ARTICLE_CODE, USER_CODE, ARTI_CATE_CODE, FR_SUBJECT, FR_PRICE, FR_CONTENT, L_CATEGORY, FR_WRITE_D, FR_SIZE, FR_HITCOUNT)
	VALUES(ARTICLE_CODE_SEQ.NEXTVAL, #{user_code}, #{arti_cate_code}, #{fr_subject},0,#{fr_content},#{l_category},SYSDATE, #{fr_size},0)
   
   </insert>
   
   <select id="check_num" resultType="java.lang.Integer">
   
   SELECT MAX(FR_ARTICLE_CODE)
   FROM TBL_FR_ARTICLE
   
   </select>

  <insert id="insertFile">
	  INSERT INTO TBL_BOARDFILE(BOARDFILE_CODE, ARTICLE_CODE, PIC, SAVEFILEPATH) VALUES(BOARDFILE_CODE_SEQ.NEXTVAL, #{article_code}, #{pic},#{savefilepath})
  </insert>

   <!-- 
    게시글 입력하기 
   <insert id="insertDate" statementType="CALLABLE">
   call PRC_FR_INSERT(#{user_code},#{arti_cate_code},#{fr_subject},#{fr_content},#{l_category_code},#{fr_size},#{pic1},#{pic2},#{pic3},#{pic4},#{savefilepath},#{originalfilename})
   </insert>
    -->
   <!-- 게시글 하나만 보여주기.  -->
   <select id="getReadData" resultType="com.test.mybatis.FreeSellFormDTO">
   
    SELECT F.FR_ARTICLE_CODE, F.USER_CODE, F.FR_SUBJECT, F.FR_PRICE, B.PIC, F.FR_CONTENT, F.L_CATEGORY, F.FR_WRITE_D, F.FR_SIZE, F.FR_HITCOUNT, U.USER_ID, U.USER_ADDR
	FROM TBL_BOARDFILE B, TBL_FR_ARTICLE F, TBL_USER U
	WHERE F.FR_ARTICLE_CODE=#{fr_article_code}
   		  AND B.ARTICLE_CODE=#{fr_article_code}
   </select>
   
   
   <!-- 게시글 리스트 보여주기.  -->
   <select id="getListDate" resultType="com.test.mybatis.FreeSellFormDTO">
      
	SELECT F.FR_ARTICLE_CODE, B.BOARDFILE_CODE, U.USER_CODE, U.USER_NAME, F.ARTI_CATE_CODE
		, F.FR_SUBJECT, F.L_CATEGORY, F.FR_WRITE_D, F.FR_HITCOUNT, B.PIC1
	FROM TBL_FR_ARTICLE F, TBL_BOARDFILE B, TBL_USER U
	WHERE F.FR_ARTICLE_CODE = B.ARTICLE_CODE
    AND  MOD(B.BOARDFILE_CODE,4) IN 1
    AND U.USER_CODE = F.USER_CODE
    AND ARTI_CATE_CODE=#{arti_cate_code}
   </select>
   

   
</mapper>





